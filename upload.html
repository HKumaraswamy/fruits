<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">

<script>
  if(sessionStorage.getItem('mana_admin') !== '1'){
    alert('Access denied');
    window.location.href = 'admin.html';
  }
</script>

<h2 class="text-2xl font-bold mb-4 text-green-700">ðŸ“¦ Add New Fruit</h2>

<div class="bg-white p-4 rounded-xl shadow max-w-md">
  <input id="name" placeholder="Fruit Name" class="w-full p-2 border rounded mb-2">
  <input id="price" placeholder="Price" class="w-full p-2 border rounded mb-2">
  <input id="image" placeholder="Image URL" class="w-full p-2 border rounded mb-2">

  <button onclick="addProduct()" class="w-full bg-green-600 text-white p-2 rounded mt-2">Add Product</button>

  <button onclick="logout()" class="w-full bg-red-600 text-white p-2 rounded mt-4">Logout</button>
</div>

<h2 class="text-xl font-bold mt-6 mb-2">ðŸ—‚ Current Products</h2>
<div id="list" class="grid grid-cols-2 md:grid-cols-4 gap-3"></div>

<script>
  const STORAGE_KEY = "kmr_products_v1";

  function load(){
    let list = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    let box = document.getElementById("list");
    box.innerHTML = "";

    list.forEach((p,i) => {
      box.innerHTML += `
        <div class="bg-white p-3 rounded shadow">
          <img src="${p.image}" class="w-full h-24 object-cover rounded">
          <h3 class="font-bold">${p.name}</h3>
          <p>â‚¹${p.price}</p>
          <button onclick="del(${i})" class="bg-red-500 text-white px-2 py-1 mt-2 w-full rounded">Delete</button>
        </div>`;
    });
  }

  function addProduct(){
    let name = name_input.value.trim();
    let price = price_input.value.trim();
    let image = image_input.value.trim();

    if(!name || !price){
      alert("Name & price required!");
      return;
    }

    let list = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    list.push({ name, price, image });
    localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
    alert("Product Added!");
    load();
  }

  function del(i){
    let list = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    list.splice(i,1);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
    load();
  }

  function logout(){
    sessionStorage.removeItem('mana_admin');
    window.location.href = 'admin.html';
  }

  load();
</script>

</body>
</html>
